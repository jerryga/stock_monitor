<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TQQQ Monitor</title>
    <style>
        body { font-family: sans-serif; padding: 2em; background: #f5f5f5; }
        .section { margin-bottom: 2em; }
        h2 { color: #444; }
        table { border-collapse: collapse; width: 100%; background: white; }
        td, th { padding: 8px; border: 1px solid #ccc; text-align: center; }
        .green { color: green; }
        .red { color: red; }
    </style>
</head>
<body>
    <h1>TQQQ å®æ—¶ç›‘æ§çœ‹æ¿</h1>

    <div class="section">
        <h2>ğŸ“Š å½“å‰æŒ‡æ ‡</h2>
        <p>å½“å‰ä»·æ ¼ï¼š<strong>{{ current_price }}</strong></p>
        <p>RSIï¼š<strong>{{ rsi }}</strong></p>
        <p>MACDï¼š<strong>{{ macd }}</strong></p>
        <p>MACD Signalï¼š<strong>{{ macd_signal }}</strong></p>
        <p>å¸ƒæ—å¸¦ä¸‹è½¨ï¼š{{ bb_lower }} / ä¸Šè½¨ï¼š{{ bb_upper }}</p>
        <p>å½“å‰ä¿¡å·ï¼š
            <strong class="{{ 'green' if signal == 'BUY' else 'red' if signal == 'SELL' else '' }}">
                {{ signal }}
            </strong>
        </p>
    </div>

    <div class="section">
        <h2>ğŸ•’ æœ€è¿‘ä¿¡å·è®°å½•</h2>
        <table>
            <tr><th>æ—¶é—´</th><th>ä¿¡å·</th><th>ä»·æ ¼</th></tr>
            {% for record in history %}
            <tr>
                <td>{{ record.time }}</td>
                <td class="{{ 'green' if record.signal == 'BUY' else 'red' if record.signal == 'SELL' else '' }}">
                    {{ record.signal }}
                </td>
                <td>{{ record.price }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <div class="section">
        <h2>ğŸ“ˆ å½“å‰å›¾è¡¨</h2>
        <img src="{{ url_for('static', filename='tqqq_chart.png') }}" width="900">
    </div>
</body>
</html>
